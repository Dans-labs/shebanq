<div>
<div id="material_message">
{{if exception_message is not None:}}
    <div class="exception">{{=exception_message}}</div>
{{pass}}
{{if exception is not None:}}
    <div class="exception">Remote exception: {{=exception}}</div>
{{pass}}
{{if pagekind == 'm':}}
    <p>{{=results}} verses</p>
{{elif pagekind == 'q':}}
    {{if pages == 0:}}
    <p>No query results</p>
    {{else:}}
    <p>Page {{=page}} of {{=pages}} with {{=results}} verse{{='s' if results != 1 else ''}}<p>
    {{pass}}
{{elif pagekind == 'w':}}
    {{if page == 0:}}
    <p>No word occurrences.</p>
    {{else:}}
    <p>Page {{=page}} of {{=pages}} with {{=results}} verse{{='s' if results != 1 else ''}}</p>
    {{pass}}
{{pass}}
</div>

<div id="material_select">
{{if pagekind != 'm':}}
    <span id="select_contents_page">
        <input type="hidden" id="rp_pages" value="{{=pages}}">
        <input type="hidden" id="rp_pagelist" value="{{=pagelist}}">
    </span>
{{pass}}
</div>

<div id="material_content">
{{ if material != None: }}
    {{ua = request.user_agent().browser.name}}
    {{if len(material.verses) > 0: }}
        {{ tp = material.tp }}
        {{ for verse in material.verses:}}
            <div class="{{=tp}}"><span class="vnum">{{=verse.label()}}</span>&nbsp;<span>{{=XML(verse.material(ua))}}</span></div>
        {{ pass }}
    {{ pass }}
{{ else: }}
    No material found.
{{ pass }}
</div>
</div>

