<div>
<div id="material_message">
{{if msg is not None:}}
    <div class="exception">{{=msg}}</div>
{{pass}}
{{
pagelb = 'pages' if pages != 1 else 'page'
verselb = 'verses' if results != 1 else 'verse'
hitlb = 'hits' if hits != 1 else 'hit'
occlb = 'occurrences' if hits != 1 else 'occurrence'
}}
{{if mr == 'm':}}
    <p>{{=results}} verses</p>
{{else:}}
    {{if qw == 'q':}}
        {{if pages == 0:}}
    <p>No query results</p>
        {{elif page > pages:}}
    <p>No result page {{=page}} (only {{=pages}} result {{=pagelb}})</p>
        {{else:}}
    <p>{{=hits}} {{=hitlb}} in {{=results}} {{=verselb}} on {{=pages}} {{=pagelb}}<p>
        {{pass}}
    {{elif qw == 'w':}}
        {{if page == 0:}}
    <p>No word occurrences.</p>
        {{elif page > pages:}}
    <p>No result page {{=page}} (only {{=pages}} result {{=pagelb}})</p>
        {{else:}}
    <p>{{=hits}} {{=occlb}} in {{=results}} {{=verselb}} on {{=pages}} {{=pagelb}}<p>
        {{pass}}
    {{pass}}
{{pass}}
</div>

<div id="material_select">
{{if mr == 'r':}}
    <span id="select_contents_page">
        <input type="hidden" id="rp_pages" value="{{=pages}}">
        <input type="hidden" id="rp_pagelist" value="{{=pagelist}}">
    </span>
{{pass}}
</div>

<div id="material_content">
    <input type="hidden" id="themonads" value="{{=monads}}"/>
{{ if material != None: }}
    {{ua = request.user_agent().browser.name}}
    {{if len(material.verses) > 0: }}
        {{tp = material.tp}}
        {{for verse in material.verses:
            (pb, b, c, v) = verse.label()
            verse_control = u'<a b="{book}" c="{chapter}" v="{verse}" class="vradio" href="#">{verse}</a>'.format(book=b, chapter=c, verse=v)
        }}
            <div class="{{=tp}}">{{
            if material.mr == 'm':
                }}<span class="vrefi">{{=XML(verse_control)}}{{
            else: 
                }}<span class="vref"><a href="#" book="{{=b}}" chapter="{{=c}}" class="cref">{{=pb}} {{=c}}:</a> {{=XML(verse_control)}}{{
            pass
                }}</span>
                <span id="txt_p_{{=b}}_{{=c}}_{{=v}}">{{=XML(verse.material(ua))}}</span><span class="txt_il_base" id="txt_il_{{=b}}_{{=c}}_{{=v}}" l="x"></span>
            </div>
        {{ pass }}
    {{ pass }}
{{ else: }}
    No material found.
{{ pass }}
</div>
</div>

