{{ left_sidebar_enabled = False }}
{{ right_sidebar_enabled = False }}
{{ ('message' in globals()) }}
{{ extend 'layout.html' }}

<h1>REST API</h1>

<p>SHEBANQ has a REST API by which you can get specific data out of SHEBANQ in JSON format.</p>

<h2>General structure of API calls</h2>
<p>All API have the form:</p>
<p><code>{{=URL('hebrew', ' ', host=True).rstrip()}}</code><i>verb</i><code>.json?</code><i>param1</i><code>=</code><i>value1</i><code>&amp;</code><i>param2</i><code>=</code><i>value2</i>...
</p>
<p>What parameters to use is dependent on the <i>verb</i>.</p>

<h2>General structure of resulting data</h2>
<p>All methods return a json dictionary containing the following entries:</p>

<dl>
<dt>good</dt>
<dd>A boolean stating whether the call was successful.</dd>
<dt>msgs</dt>
<dd>A list of diagnostic messages. Every message is a pair consisting of a label indicating the kind of diagnostic (error, warning, info) and the
text of the message.</dd>
<dt>data</dt>
<dd>A dictionary or list of the actual data, depending on the specific verb.</dd> 
</dl>

<h2>Verbs</h2>
<h3 class="apiverb">query</h3>
{{example_call = URL('hebrew', 'query', extension='json', vars=dict(id=500), host=True)}}
<p><b>Example:</b> <a target="_blank" href="{{=example_call}}"><code>{{=example_call}}</code></a></p>
<p>Parameters:</p>
    <dl>
    <dt>id</dt><dd>id of the query whose data is to be fetched.</dd>
    <dt>iid</dt><dd>synonymous to <b>id</b></dd>
    </dl>
<p>Returns the metadata of a query. There is a version independent part and a version dependent part (ETCBC data versions, that is).
The metadata shows the number of results (per version), the query body, the execution status (whether the current results match the current body), the provenance,
the version of the query engine, and more.</p>

<h3 class="apiverb">verse</h3>
{{example_call = URL('hebrew', 'verse', extension='json', vars=dict(version='4b', book='Genesis', chapter=1, verse=1), host=True)}}
<p><b>Example:</b> <a target="_blank" href="{{=example_call}}"><code>{{=example_call}}</code></a></p>
<p>Parameters:</p>
    <dl>
    <dt>version</dt><dd>version of the ETCBC data (<code>4</code>, <code>4b</code>, ...)</dd>
    <dt>book</dt><dd>name of the bible book, spelled exactly as in SHEBANQ</dd>
    <dt>chapter</dt><dd>chapter number</dd>
    <dt>verse</dt><dd>verse number</dd>
    </dl>
<p>Returns the text of a verse, specified by book, chapter number and verse number. The text is returned in two ways:</p>
    <dl>
        <dt>text</dt><dd>plain Hebrew text, unicode, pointed, accented, as in a printed version of the BHS</dd>
        <dt>phonetic</dt><dd>phonetic transcription, generated by the <a target="_blank" href="{{=URL('tools', 'index', vars=dict(goto='phono'))}}">phono tool</a></dd>
    </dl>

<h2>Contact</h2>
<p>Interested in integrating data from shebanq in your application or website but seeing no verb that suits you?
Having issues?
Please contact me, I'm willing to extend the API or to have a look.</p>
<p><a href="mailto:dirk.roorda@dans.knaw.nl">Dirk Roorda</a>.</p>
